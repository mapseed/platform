<h4 class="">{{ place_config.title }}</h4>
<p class="drag-marker-instructions">
  {{#_}}First drag the map to set your pin's location.{{/_}}
</p>
<p class="drag-marker-warning is-visuallyhidden">{{#_}}It looks like you didn't set your location yet. Please drag the map to your location.{{/_}}</p>

<p class="form-field">{{ place_config.help_text }}</p>

<form id="place-form" class="place-form clearfix">

  <fieldset>
    <input type="hidden" name="visible" value="on">
    <input type="hidden" name="user_token" value="{{{ user_token }}}">

    <!-- TODO We need user data in the template to know whether a user
         is already logged in.
       -->

    <!-- place buttons for dynamic form categories -->
    <div id="category-btns">
      {{#each place_config.categories}}
        <input name="category-btn-{{ @key }}" id="category-btn-{{ @key }}" value="{{ label }}" class="btn btn-primary category-change-btn">
      {{/each}}
    </div>

    <br>

    <!-- generate content for selected category -->
    {{#each selected_category.fields}}
      <div class="{{ type }} form-field">
        <label for="place-{{ name }}">{{ prompt }} {{# optional }}<small>({{#_}}optional{{/_}})</small>{{/ optional }}</label>
        
        <!-- begin field type definitions -->
        {{#is type "text"}}
          <input id="place-{{ name }}" name="{{ name }}" type="{{ type }}" {{#attrs}} {{ key }}="{{ value }}"{{/attrs}} placeholder="{{placeholder}}">
          {{#is name "submitter_name"}}
            {{^is_authenticated}}
              <span class="or-sign-in">{{#_}}Or sign in with <a class="auth-inline twitter-btn" href="/users/login/twitter/">Twitter</a> <a class="auth-inline facebook-btn" href="/users/login/facebook/">Facebook</a>{{/_}}</span>
            {{/is_authenticated}}
            {{^}}
          {{/is}}
        {{/is}}

        {{#is type "textarea"}}
          <textarea id="place-{{ name }}" name="{{ name }}"{{#attrs}} {{ key }}="{{ value }}"{{/attrs}} placeholder="{{placeholder}}"></textarea>
        {{/is}}

        {{#is type "radio_big_buttons"}}
          <div>
            {{#each (property ../../place_config.dynamic_form_content content)}}
                <input type="radio" name={{ ../name }} id={{ value }} class="radio-big">
                <label for={{ value }}>{{ label }}</label>
                <!--
                <span name="" id="report-type-{{this.value}}" class="btn btn-primary report-type-btn">{{this.label}}</span>
                -->
            {{/each}}
          </div>
          <div style="clear:both"></div>
        {{/is}}

        {{#is_file}}
          <span class="fileinput-container btn btn-small{{^is_fileinput_supported}} btn-disabled{{/is_fileinput_supported}}">
            <span>{{ inputfile_label }}</span>
            <input id="place-{{ name }}" name="{{ name }}" type="{{ type }}"
                   {{#attrs}} {{ key }}="{{ value }}"{{/attrs}}
                   {{^is_fileinput_supported}} disabled{{/is_fileinput_supported}}>
          </span>
          <span class="fileinput-name">
            {{^is_fileinput_supported}}{{#_}}Sorry, your browser doesn't support file uploads.{{/_}}{{/is_fileinput_supported}}
          </span>
        {{/is_file}}

        {{#is type "submit"}}
        <div>
          <input name="save-place-btn" id="save-place-btn" type="submit" value="{{ label }}" class="btn btn-primary submit-btn">
        </div>
        {{/is}}
        <!-- end field type definitions -->

      </div>
    {{/each}}
    <div class="form-spinner"></div>
</form>
  