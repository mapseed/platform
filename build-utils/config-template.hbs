(function(S, $){
  S.Config = {
    defaultPlaceTypeName: '{{ default_place_type }}',
    userToken: (
      S.bootstrapped.currentUser ?
      'user:' + S.bootstrapped.currentUser.id :
      "{{ user_token_json }}"),
    app:        {{#serialize config.app}}{{/serialize}},
    place:      {{#serialize config.place}}{{/serialize}},
    placeTypes: {{#serialize config.place_types}}{{/serialize}},
    cluster:    {{#serialize config.cluster}}{{/serialize}},
    survey:     {{#serialize config.survey}}{{/serialize}},
    support:    {{#serialize config.support}}{{/serialize}},
    map:        {{#serialize config.map}}{{/serialize}},
    activity:   {{#serialize config.activity}}{{/serialize}},
    sidebar:    {{#serialize config.sidebar}}{{/serialize}},
    leaflet_sidebar: {{#serialize config.leaflet_sidebar}}{{/serialize}},
    pages:           {{#serialize config.pages}}{{/serialize}},
    story:           {{#serialize config.story}}{{/serialize}},
    rightSidebar:    {{#serialize config.right_sidebar}}{{/serialize}},
    filters:         {{#serialize config.filters}}{{/serialize}},
    datasets:        {{#serialize config.datasets}}{{/serialize}},
    languageCode:    {{#serialize languageCode}}{{/serialize}},
    customHooks:     {{#serialize config.custom_hooks}}{{/serialize}},
    customComponents:{{#serialize config.custom_components}}{{/serialize}}
  };

  $(function() {
    // Ready set go!
    window.app = new Shareabouts.App({
      activity: [],
      defaultPlaceTypeName: S.Config.defaultPlaceTypeName,
      userToken: S.Config.userToken,
      appConfig: S.Config.app,
      placeConfig: S.Config.place,
      placeTypes: S.Config.placeTypes,
      cluster: S.Config.cluster,
      sidebarConfig: S.Config.sidebar,
      rightSidebarConfig: S.Config.rightSidebar,
      surveyConfig: S.Config.survey,
      supportConfig: S.Config.support,
      mapConfig: S.Config.map,
      storyConfig: S.Config.story,
      activityConfig: S.Config.activity,
      pagesConfig: S.Config.pages,
      filters: S.Config.filters,
      datasetsConfig: S.Config.datasets,
      languageCode: S.Config.languageCode,
      customHooks: S.Config.customHooks,
      customComponents: S.Config.customComponents
    });
  });
}(Shareabouts, jQuery));
